<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<?xml-stylesheet type="text/xsl" href="modx.prosilver.en.xsl"?>
<!--For security purposes, please check: http://www.phpbb.com/mods/ for the latest version of this MOD. Although MODs are checked before being allowed in the MODs Database there is no guarantee that there are no security problems within the MOD. No support will be given for MODs not found within the MODs Database which can be found at http://www.phpbb.com/mods/-->
<mod xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://www.phpbb.com/mods/xml/modx-1.2.2.xsd">
	<header>
		<license>http://opensource.org/licenses/gpl-license.php GNU General Public License v2</license>
		
		<title lang="en">Favicon</title>
		
		<description lang="en">This MOD allows you to add a favicon to be displayed on browsers.</description>
		
		<author-group>
			<author>
				<username>Nidhal</username>

			</author>
		</author-group>
		
		<mod-version>1.0.0</mod-version>
		
		<installation>
			<level>easy</level>
			<time>180</time>

			<target-version>3.0.5</target-version>
		</installation>
	

	</header>
	
	<action-group>
	<sql>INSERT INTO `phpbb_config` (`config_name`, `config_value`, `is_dynamic`) VALUES('favicon', '', 0);</sql>
	
		<open src="includes/functions.php">
			<edit>
				<find>		'SITE_DESCRIPTION'				=> $config['site_desc'],
</find>
				<action type="after-add">		'FAVICON'						=> $config['favicon'],</action>
			</edit>
		</open>
		
		<open src="includes/acp/acp_board.php">
			<edit>
				<find>						'site_desc'				=> array('lang' => 'SITE_DESC',				'validate' => 'string',	'type' => 'text:40:255', 'explain' => false),</find>
				<action type="after-add">						'favicon'				=> array('lang' => 'FAVICON_URL',			'validate' => 'string',	'type' => 'text:40:255', 'explain' => false),</action>
			</edit>
		</open>
		
		<open src="language/en/acp/board.php">
		<edit>
				<find>	'JAB_USERNAME_EXPLAIN'		=> 'Specify a registered username or a valid JID. The username will not be checked for validity. If you only specify a username, then your JID will be the username and the server you specified above. Else, specify a valid JID, for example user@jabber.org.',</find>
				<action type="after-add">	'FAVICON_URL'				=> 'Favicon',</action>
		</edit>
		</open>
		
		<open src="styles/prosilver/template/overall_header.html">
			<edit>
				<find><![CDATA[<title>{SITENAME} &bull; <!-- IF S_IN_MCP -->{L_MCP} &bull; <!-- ELSEIF S_IN_UCP -->{L_UCP} &bull; <!-- ENDIF -->{PAGE_TITLE}</title>]]></find>
				<action type="after-add"><![CDATA[<!-- IF FAVICON --><link rel="shortcut icon" href="{FAVICON}" type="image/x-icon" /><!-- ENDIF -->]]></action>
			</edit>
		</open>
		
		<diy-instructions lang="en">Don't forget to purge your cache.</diy-instructions>

	</action-group>

</mod>